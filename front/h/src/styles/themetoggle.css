/* Контейнер переключателя */
.theme-switch {
    --w: 56px;         /* ширина трека */
    --h: 32px;         /* высота трека */
    --p: 3px;          /* внутренний отступ для бегунка */
    --on: var(--color-primary, #3b82f6);
    --off: #e9e9ee;    /* светло-серая дорожка */
    --thumb-bg: #fff;
    --thumb-shadow: 0 1px 0 rgba(0, 0, 0, 0.12),
      0 3px 6px rgba(0, 0, 0, 0.16);
    --thumb-shadow-active: 0 1px 0 rgba(0, 0, 0, 0.18),
      0 6px 12px rgba(0, 0, 0, 0.22);
    position: relative;
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    user-select: none;
  }
  
  /* Невидимый, но доступный инпут */
  .theme-switch > input {
    position: absolute;
    inset: 0;
    margin: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
  }
  
  /* Трек */
  .theme-switch .track {
    width: var(--w);
    height: var(--h);
    border-radius: var(--h);
    background: var(--off);
    position: relative;
    display: inline-block;
    box-shadow:
      inset 0 1px 0 rgba(0, 0, 0, 0.05),
      inset 0 0 0 1px rgba(0, 0, 0, 0.04);
    transition: background 180ms ease;
  }
  
  /* Бегунок */
  .theme-switch .thumb {
    position: absolute;
    top: var(--p);
    left: var(--p);
    width: calc(var(--h) - var(--p) * 2);
    height: calc(var(--h) - var(--p) * 2);
    border-radius: 999px;
    background: var(--thumb-bg, #fff);
    box-shadow: var(--thumb-shadow);
    transition: transform 180ms ease, box-shadow 180ms ease;
    will-change: transform;
  }
  
  /* Состояние "включено" (тёмная тема) */
  .theme-switch.is-on .track {
    background: var(--on);
  }
  
  .theme-switch.is-on .thumb {
    transform: translateX(calc(var(--w) - var(--h)));
  }
  
  /* Фокус и доступность */
  .theme-switch > input:focus-visible + .track,
  .theme-switch > input:focus + .track {
    outline: 2px solid rgba(59, 130, 246, 0.55);
    outline-offset: 3px;
  }
  
  /* Состояние нажатия */
  .theme-switch > input:active + .track .thumb {
    box-shadow: var(--thumb-shadow-active);
  }
  
  /* Уважение настроек пользователя */
  @media (prefers-reduced-motion: reduce) {
    .theme-switch .track,
    .theme-switch .thumb {
      transition: none;
    }
  }
  
  [data-theme="dark"] .theme-switch {
    --off: #1f2937;
    --thumb-bg: #f8fafc;
    --thumb-shadow: 0 1px 0 rgba(15, 23, 42, 0.25),
      0 3px 6px rgba(15, 23, 42, 0.35);
    --thumb-shadow-active: 0 1px 0 rgba(15, 23, 42, 0.32),
      0 6px 12px rgba(15, 23, 42, 0.42);
  }
  
  [data-theme="dark"] .theme-switch .track {
    box-shadow:
      inset 0 1px 0 rgba(148, 163, 184, 0.12),
      inset 0 0 0 1px rgba(148, 163, 184, 0.18);
  }
  
